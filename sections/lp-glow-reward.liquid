{{ 'lp-glow-reward.css' | asset_url | stylesheet_tag }}
{{ 'swiper-chunk.js' | asset_url | script_tag }}

<section class="lp-glow-reward" style="padding-top: {{ section.settings.padding_top_desktop }}px; padding-bottom: {{ section.settings.padding_bottom_desktop }}px;">
  <div class="section section--vertical-padding-none">
    <div class="lp-glow-reward__container">
      <div class="lp-glow-reward__content">
        {% if section.settings.heading != blank %}
          <h2 class="lp-glow-reward__heading">{{ section.settings.heading }}</h2>
        {% endif %}
        
        {% if section.settings.text != blank %}
          <div class="lp-glow-reward__text">{{ section.settings.text }}</div>
        {% endif %}
        
        {% if section.settings.checkmark_list != blank %}
          <div class="lp-glow-reward__checkmarks">
            {{ section.settings.checkmark_list }}
          </div>
        {% endif %}
        
        {% if section.settings.button_text != blank %}
          <div class="lp-glow-reward__button">
            <a href="{{ section.settings.button_url | default: '#' }}" 
               class="btn lp-glow-reward__btn">
              {{ section.settings.button_text }}
            </a>
          </div>
        {% endif %}
      </div>
      
      {% if section.blocks.size > 0 %}
        <div class="lp-glow-reward__carousel">
          <div class="lp-glow-reward__carousel--content">
            {%- if section.settings.carousel_heading != blank -%}
              <div class="lp-glow-reward__carousel--header">
                {{ section.settings.carousel_heading }}
              </div>
            {%- endif -%}

            <div class="swiper lp-glow-reward__swiper">
              <div class="swiper-wrapper">
                {% for block in section.blocks %}
                  {% case block.type %}
                    {% when 'carousel_image' %}
                      <div class="swiper-slide lp-glow-reward__slide" {{ block.shopify_attributes }}>
                        {% if block.settings.image %}
                          <div class="lp-glow-reward__image-wrapper">
                            <img 
                              src="{{ block.settings.image | img_url: '600x600' }}" 
                              alt="{{ block.settings.image.alt | default: 'Carousel image' }}"
                              class="lp-glow-reward__image"
                              loading="lazy"
                            />
                          </div>
                        {% endif %}
                      </div>
                  {% endcase %}
                {% endfor %}
              </div>
              
              <!-- Navigation -->
              <div class="swiper-pagination lp-glow-reward__pagination"></div>
            </div>
          </div>

          {%- if section.settings.section_overlay_img != blank -%}
            <img class="lp-glow-review__overlay-img" src="{{ section.settings.section_overlay_img |  img_url: 'original' }}" width="" height="" alt="">
          {%- endif -%}
        </div>
      {% endif %}
    </div>
  </div>
</section>

<style>
  @media (max-width: 768px) {
    .lp-glow-reward {
      padding-top: {{ section.settings.padding_top_mobile }}px !important;
      padding-bottom: {{ section.settings.padding_bottom_mobile }}px !important;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const section = document.querySelector('#shopify-section-{{ section.id }}');
    const swiperElement = section.querySelector('.lp-glow-reward__swiper');
    
    if (swiperElement && typeof Swiper !== 'undefined') {
      new Swiper(swiperElement, {
        slidesPerView: 3,
        spaceBetween: -60,
        centeredSlides : true,
        loop: true,
        pagination: {
          el: section.querySelector('.lp-glow-reward__pagination'),
          clickable: true
        },
        fadeEffect: {
          crossFade: true
        }
      });
    }
  });
</script>

{% schema %}
{
  "name": "LP Glow Reward",
  "tag": "section",
  "class": "lp-glow-reward-section",
  "settings": [
    {
      "type": "image_picker",
      "id": "section_overlay_img",
      "label": "Overlay image"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Section Heading",
      "default": "Glow On, Stay Rewarded."
    },
    {
      "type": "richtext",
      "id": "text",
      "label": "Section Text",
      "default": "<p>Make every drop count with our Subscribe & Save + Glow Getter Rewards.</p>"
    },
    {
      "type": "richtext",
      "id": "checkmark_list",
      "label": "Checkmark List",
      "default": "<ul><li>Save 15% and enjoy free shipping on auto-deliveries</li><li>Earn points on every purchase to redeem for perks & gifts</li><li>Cancel anytimeâ€”your glow, your way</li></ul>"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "SHOP BLENDROPS"
    },
    {
      "type": "url",
      "id": "button_url",
      "label": "Button URL"
    },
    {
      "type": "header",
      "content": "Carousel"
    },
    {
      "type": "text",
      "id": "carousel_heading",
      "label": "Carousel heading"
    },
    {
      "type": "header",
      "content": "Desktop Padding"
    },
    {
      "type": "range",
      "id": "padding_top_desktop",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Top (Desktop)",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom_desktop",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Bottom (Desktop)",
      "default": 80
    },
    {
      "type": "header",
      "content": "Mobile Padding"
    },
    {
      "type": "range",
      "id": "padding_top_mobile",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Top (Mobile)",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom_mobile",
      "min": 0,
      "max": 200,
      "step": 5,
      "unit": "px",
      "label": "Padding Bottom (Mobile)",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "carousel_image",
      "name": "Carousel Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "LP Glow Reward",
      "blocks": [
        {
          "type": "carousel_image"
        },
        {
          "type": "carousel_image"
        },
        {
          "type": "carousel_image"
        }
      ]
    }
  ]
}
{% endschema %}