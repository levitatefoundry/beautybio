{% if product and product.metafields["custom_fields"]["faqs"] %}
    {{ 'section-faqs.css' | asset_url | stylesheet_tag }}
    {{ 'section-accordion.css' | asset_url | stylesheet_tag }}
  
    <product-faqs class="product-faqs product-faqs-section-{{ section.id }}">
      <div class="page-width">
        <div class="product-faqs--header-container">
          <h2 class="product-faqs--header section__title">{{ section.settings.title}}</h2>
        </div>
        <section id="section-accordion" class="section-accordion section-accordion-{{ section.id }}" data-section-id="{{ section.id }}">
          <div class="toggle_title">{{ section.settings.toggle_title }} <svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
            <path d="M9.00002 0.877869V17.6779" stroke="black" stroke-width="2"/>
            <path d="M17 9.67786L0.199963 9.67786" stroke="black" stroke-width="2"/>
          </svg>
        </div>
            <div class="rte-accordion row collection-accordion">                                 
              {% assign faqs = product.metafields.custom.faqs_content.value %} 
              {% if faqs %}               
                <div class="tab_container">
                {% for faq in faqs %}
                  {% assign index = faq | plus: 0 %}                                                    
                      <h3 class="tab_drawer_heading" rel="tab{{ index }}">
                        {{ faq |split:'::' | first }}
                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="18" viewBox="0 0 17 18" fill="none">
                          <path d="M9.00002 0.877869V17.6779" stroke="black" stroke-width="2"/>
                          <path d="M17 9.67786L0.199963 9.67786" stroke="black" stroke-width="2"/>
                        </svg>
                      </h3>
                      <div id="tab{{ index }}" class="tab_content"> {{ faq |split:'::' | last }}</div> 
                {% endfor %} 
              </div>
              {% endif %}
            </div>
        </section>
      </div>
    </product-faqs>
  
    <style type="text/css">
      #shopify-section-{{section.id}} {
        background: {{ section.settings.faqs_bg }};
      }
    </style>
  {% endif %}
  
  {% schema %}
    {
      "name": "Product FAQs",
      "settings": [
         {
        "type": "richtext",
        "id": "title",
        "label": "Heading"
        }, 
        {
          "type": "richtext",
          "id": "toggle_title",
          "label": "Toggle Heading"
          },
        {
          "type": "color",
          "id": "faqs_bg",
          "default": "transparent",
          "label": "t:sections.faqs.settings.background_color.label"
        }
      ],
      "presets": [
          {
            "name": "Frequently Asked Questions",
            "blocks": []
          }
        ]
    }
  {% endschema %}
  
  {% javascript %}
    class ProductFAQs extends HTMLElement {
      constructor() {
        super();
      }
    }
  
    customElements.define('product-faqs', ProductFAQs);

 //   document.querySelector(".tab_content").style.display = "block";
    document.querySelectorAll(".tab_drawer_heading").forEach(function(tab) {
    tab.addEventListener("click", function() {
        var isActive = this.classList.contains('d_active');       
        // document.querySelectorAll(".tab_content").forEach(function(content) {
        //     content.style.display = "none";
        // });
        if (isActive) {          
            document.querySelectorAll(".tab_drawer_heading").forEach(function(tab) {
                tab.classList.remove("d_active");
            });
        } else {      
         
            var d_activeTab = this.getAttribute("rel");
        //    document.getElementById(d_activeTab).style.display = "block";
            document.querySelectorAll(".tab_drawer_heading").forEach(function(tab) {
                tab.classList.remove("d_active");
            });
            this.classList.add("d_active");
        }
    });
});


document.querySelector(".toggle_title").addEventListener("click", function (evt) {
  this.classList.toggle("active");
});
  {% endjavascript %}

<style>
    .product-faqs .tab_content {
      display: none; 
      border-bottom: 1px solid #D9D9D9;
      padding-bottom: 32px;
      color: #666;
      font-family: 'Avenir_Next_LT_Pro_Regular';
      font-size: 16px;
      font-weight: 400; 
      margin-top: -3px;
      letter-spacing: 0;     
      line-height: 140%; /* 22.4px */
  }
  .product-faqs .tab_content p,.product-faqs .product-faqs--header p{
    margin:0;
  }
  .product-faqs .page-width {
    padding: 24px 64px;
}
.product-faqs .product-faqs--header {
  margin: -7px 0 24px;
  padding: 0;
  color: #000;
  font-family: 'Avenir_Next_LT_Pro_Demi';
  font-family: 'AvenirNextLTProDemi';  
  font-size: 40px;
  font-weight: 600;
  line-height: 120%; /* 48px */
  text-transform: uppercase;
  letter-spacing: 0;
}
.template-product .product-faqs {
  display: block;
  min-height: inherit;
}
.product-faqs .section-accordion {
  padding-top: 0;
  padding-bottom: 0;
  max-width: 700px;
  margin: 0 auto;
}
.tab_drawer_heading {
  color: var(--Black, #000);
  font-family: 'Avenir_Next_LT_Pro_Demi';
  font-family: 'AvenirNextLTProDemi';  
  font-size: 16px;
  font-weight: 600;
  line-height: normal; 
  border-bottom: 1px solid #D9D9D9;
  padding: 32px 25px 32px 0;
  position: relative;
  margin: 0;
  cursor: pointer;
  letter-spacing: 0;
}
.tab_drawer_heading:first-child {
  padding-top:0;
}
h3.tab_drawer_heading.d_active {
  padding-bottom: 12px;
  border-bottom: 0;
}
.product-faqs h3.tab_drawer_heading.d_active + .tab_content{
  display: block !important;
}
 .tab_drawer_heading svg {
  position: absolute;
  right: 0; 
  top: 50%;
  bottom: auto;
  transform: translateY(-50%);
}
h3.tab_drawer_heading.d_active svg path:first-child {
  display: none;
}
.toggle_title {
  color: #000;  
  font-family: 'Avenir_Next_LT_Pro_Demi';
  font-family: 'AvenirNextLTProDemi';  
  font-size: 20px;
  font-weight: 600;
  line-height: 110%;
  text-transform: uppercase;
  position: relative;
  border-top:1px solid #D9D9D9;
  border-bottom:1px solid #D9D9D9;
  padding: 20px 0;
  cursor: pointer;
}
  .toggle_title p{
  margin: 0;
}
.toggle_title svg{
  position: absolute;
  right: 0;
  top: 50%;
  bottom: auto;
  transform: translateY(-50%);
}
.toggle_title.active svg path:first-child {
  display: none;
}
.toggle_title.active{
 
  border-bottom:0;
  padding-bottom: 0;
  margin-bottom:24px;
}
.product-faqs .rte-accordion {
  display: none;
  padding: 0 16px;
}
.product-faqs  .toggle_title.active ~ .rte-accordion {
  display: block;
}
@media(max-width:1365px){  
  .product-faqs .page-width{  padding:24px 50px;}  
}
@media(max-width:1199px){
   .product-faqs .page-width{ padding:24px }
   .product-faqs .product-faqs--header{font-size: 32px;line-height: 35.2px;margin-bottom:32px;margin-top:-5px;}  
}
@media(max-width:989px){  
}
@media(max-width:749px){   
  .product-faqs .page-width{padding:8px 16px 24px;}
  .tab_drawer_heading {font-size: 14px;line-height:normal; /* 20.8px */padding: 24px 30px 24px 0;}
  .product-faqs .tab_content{padding-bottom: 24px;}
  .product-faqs .product-faqs--header{font-size: 28px;line-height: 30.8px;}
  .toggle_title{font-size:16px;line-height: 130%; }
  .product-faqs .tab_content{font-size: 14px;}
  .tab_drawer_heading:first-child svg { top: 0; transform: none;}
}
</style>